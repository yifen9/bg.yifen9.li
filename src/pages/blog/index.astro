---
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort((a, b) =>
	a.data.date < b.data.date ? 1 : -1,
);
---
<html>
  <head><meta charset="utf-8" /><title>Blog</title></head>
  <body>
    <h1>Blog</h1>
    <ul>
      {posts.map((p) => (
        <li>
          <a href={`/blog/${p.slug}`}>{p.data.title}</a>
          — {p.data.date}
          — Players: {p.data.players.join(", ")}
          — Games: {p.data.games.length}
        </li>
      ))}
    </ul>
  </body>
</html>
