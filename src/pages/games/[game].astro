---
import sessions from "../../../data/sessions.json";
import games from "../../../data/games.json";
export async function getStaticPaths() {
  const uniq = [...new Set(sessions.map((s) => s.game))];
  return uniq.map((g) => ({ params: { game: g } }));
}
const g = Astro.params.game;
const info = games.find((x) => x.game === g);
const list = sessions.filter((s) => s.game === g).sort((a,b)=>a.date<b.date?1:-1);
---
<html>
  <head><meta charset="utf-8" /><title>{g}</title></head>
  <body>
    <h1>{g}</h1>
    {info && (
      <div>
        <p>Avg: {String(info.avg)}</p>
        <p>Median: {String(info.median)}</p>
        <p>Ratings: {info.ratings_count}</p>
        <p>Plays: {info.plays}</p>
      </div>
    )}
    <h2>Sessions</h2>
    <ul>
      {list.map((s) => <li><a href={`/sessions/${s.session_id}`}>{s.date} â€” {s.session_id}</a></li>)}
    </ul>
  </body>
</html>
